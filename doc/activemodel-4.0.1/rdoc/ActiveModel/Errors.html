<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: ActiveModel::Errors</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/active_model/errors_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/active_model/errors.rb">lib/active_model/errors.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-5B-5D">#[]</a></li>
          
          <li><a href="#method-i-5B-5D-3D">#[]=</a></li>
          
          <li><a href="#method-i-add">#add</a></li>
          
          <li><a href="#method-i-add_on_blank">#add_on_blank</a></li>
          
          <li><a href="#method-i-add_on_empty">#add_on_empty</a></li>
          
          <li><a href="#method-i-added-3F">#added?</a></li>
          
          <li><a href="#method-i-as_json">#as_json</a></li>
          
          <li><a href="#method-i-blank-3F">#blank?</a></li>
          
          <li><a href="#method-i-clear">#clear</a></li>
          
          <li><a href="#method-i-count">#count</a></li>
          
          <li><a href="#method-i-delete">#delete</a></li>
          
          <li><a href="#method-i-each">#each</a></li>
          
          <li><a href="#method-i-empty-3F">#empty?</a></li>
          
          <li><a href="#method-i-full_message">#full_message</a></li>
          
          <li><a href="#method-i-full_messages">#full_messages</a></li>
          
          <li><a href="#method-i-full_messages_for">#full_messages_for</a></li>
          
          <li><a href="#method-i-generate_message">#generate_message</a></li>
          
          <li><a href="#method-i-get">#get</a></li>
          
          <li><a href="#method-i-has_key-3F">#has_key?</a></li>
          
          <li><a href="#method-i-include-3F">#include?</a></li>
          
          <li><a href="#method-i-keys">#keys</a></li>
          
          <li><a href="#method-i-set">#set</a></li>
          
          <li><a href="#method-i-size">#size</a></li>
          
          <li><a href="#method-i-to_a">#to_a</a></li>
          
          <li><a href="#method-i-to_hash">#to_hash</a></li>
          
          <li><a href="#method-i-to_xml">#to_xml</a></li>
          
          <li><a href="#method-i-values">#values</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><span class="include">Enumerable</span></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../ActiveModel.html">ActiveModel</a></li>
        
          <li><a href="../ActiveModel/AttributeMethods.html">ActiveModel::AttributeMethods</a></li>
        
          <li><a href="../ActiveModel/AttributeMethods/ClassMethods.html">ActiveModel::AttributeMethods::ClassMethods</a></li>
        
          <li><a href="../ActiveModel/Callbacks.html">ActiveModel::Callbacks</a></li>
        
          <li><a href="../ActiveModel/Conversion.html">ActiveModel::Conversion</a></li>
        
          <li><a href="../ActiveModel/Dirty.html">ActiveModel::Dirty</a></li>
        
          <li><a href="../ActiveModel/Errors.html">ActiveModel::Errors</a></li>
        
          <li><a href="../ActiveModel/ForbiddenAttributesError.html">ActiveModel::ForbiddenAttributesError</a></li>
        
          <li><a href="../ActiveModel/Lint.html">ActiveModel::Lint</a></li>
        
          <li><a href="../ActiveModel/Lint/Tests.html">ActiveModel::Lint::Tests</a></li>
        
          <li><a href="../ActiveModel/MissingAttributeError.html">ActiveModel::MissingAttributeError</a></li>
        
          <li><a href="../ActiveModel/Model.html">ActiveModel::Model</a></li>
        
          <li><a href="../ActiveModel/Name.html">ActiveModel::Name</a></li>
        
          <li><a href="../ActiveModel/Naming.html">ActiveModel::Naming</a></li>
        
          <li><a href="../ActiveModel/SecurePassword.html">ActiveModel::SecurePassword</a></li>
        
          <li><a href="../ActiveModel/SecurePassword/ClassMethods.html">ActiveModel::SecurePassword::ClassMethods</a></li>
        
          <li><a href="../ActiveModel/SecurePassword/ClassMethods/InstanceMethodsOnActivation.html">ActiveModel::SecurePassword::ClassMethods::InstanceMethodsOnActivation</a></li>
        
          <li><a href="../ActiveModel/Serialization.html">ActiveModel::Serialization</a></li>
        
          <li><a href="../ActiveModel/Serializers.html">ActiveModel::Serializers</a></li>
        
          <li><a href="../ActiveModel/Serializers/JSON.html">ActiveModel::Serializers::JSON</a></li>
        
          <li><a href="../ActiveModel/Serializers/Xml.html">ActiveModel::Serializers::Xml</a></li>
        
          <li><a href="../ActiveModel/StrictValidationFailed.html">ActiveModel::StrictValidationFailed</a></li>
        
          <li><a href="../ActiveModel/Translation.html">ActiveModel::Translation</a></li>
        
          <li><a href="../ActiveModel/Validations.html">ActiveModel::Validations</a></li>
        
          <li><a href="../ActiveModel/Validations/Callbacks.html">ActiveModel::Validations::Callbacks</a></li>
        
          <li><a href="../ActiveModel/Validations/Callbacks/ClassMethods.html">ActiveModel::Validations::Callbacks::ClassMethods</a></li>
        
          <li><a href="../ActiveModel/Validations/ClassMethods.html">ActiveModel::Validations::ClassMethods</a></li>
        
          <li><a href="../ActiveModel/Validations/HelperMethods.html">ActiveModel::Validations::HelperMethods</a></li>
        
          <li><a href="../ActiveModel/Validator.html">ActiveModel::Validator</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">ActiveModel::Errors</h1>

    <div id="description" class="description">
      
<h2>Active Model Errors</h2>

<p>Provides a modified <tt>Hash</tt> that you can include in your object for
handling error messages and interacting with Action Pack helpers.</p>

<p>A minimal implementation could be:</p>

<pre>class Person
  # Required dependency for ActiveModel::Errors
  extend ActiveModel::Naming

  def initialize
    @errors = ActiveModel::Errors.new(self)
  end

  attr_accessor :name
  attr_reader   :errors

  def validate!
    errors.add(:name, &quot;can not be nil&quot;) if name == nil
  end

  # The following methods are needed to be minimally implemented

  def read_attribute_for_validation(attr)
    send(attr)
  end

  def Person.human_attribute_name(attr, options = {})
    attr
  end

  def Person.lookup_ancestors
    [self]
  end
end</pre>

<p>The last three methods are required in your object for <a
href="Errors.html">Errors</a> to be able to generate error messages
correctly and also handle multiple languages. Of course, if you extend your
object with <a href="Translation.html">ActiveModel::Translation</a> you
will not need to implement the last two. Likewise, using <a
href="Validations.html">ActiveModel::Validations</a> will handle the
validation related methods for you.</p>

<p>The above allows you to do:</p>

<pre>person = Person.new
person.validate!            # =&gt; [&quot;can not be nil&quot;]
person.errors.full_messages # =&gt; [&quot;name can not be nil&quot;]
# etc..</pre>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="CALLBACKS_OPTIONS">CALLBACKS_OPTIONS</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="messages-attribute-method" class="method-detail">
          <a name="messages"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">messages</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(base)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Pass in the instance of the object that is using the errors object.</p>

<pre>class Person
  def initialize
    @errors = ActiveModel::Errors.new(self)
  end
end</pre>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">base</span>)
  <span class="ruby-ivar">@base</span>     = <span class="ruby-identifier">base</span>
  <span class="ruby-ivar">@messages</span> = {}
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="5B-5D-method" class="method-detail ">
          <a name="method-i-5B-5D"></a>

          
          <div class="method-heading">
            <span class="method-name">[]</span><span
              class="method-args">(attribute)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>When passed a symbol or a name of a method, returns an array of errors for
the method.</p>

<pre>person.errors[:name]  # =&gt; [&quot;can not be nil&quot;]
person.errors['name'] # =&gt; [&quot;can not be nil&quot;]</pre>
            

            
            <div class="method-source-code" id="5B-5D-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">attribute</span>)
  <span class="ruby-identifier">get</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_sym</span>, [])
<span class="ruby-keyword">end</span></pre>
            </div><!-- 5B-5D-source -->
            
          </div>

          

          
        </div><!-- 5B-5D-method -->

      
        <div id="5B-5D-3D-method" class="method-detail ">
          <a name="method-i-5B-5D-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">[]=</span><span
              class="method-args">(attribute, error)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds to the supplied attribute the supplied error message.</p>

<pre>person.errors[:name] = &quot;must be set&quot;
person.errors[:name] # =&gt; ['must be set']</pre>
            

            
            <div class="method-source-code" id="5B-5D-3D-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">error</span>)
  <span class="ruby-keyword">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">error</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- 5B-5D-3D-source -->
            
          </div>

          

          
        </div><!-- 5B-5D-3D-method -->

      
        <div id="add-method" class="method-detail ">
          <a name="method-i-add"></a>

          
          <div class="method-heading">
            <span class="method-name">add</span><span
              class="method-args">(attribute, message = nil, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds <tt>message</tt> to the error messages on <tt>attribute</tt>. More
than one error can be added to the same <tt>attribute</tt>. If no
<tt>message</tt> is supplied, <tt>:invalid</tt> is assumed.</p>

<pre>person.errors.add(:name)
# =&gt; [&quot;is invalid&quot;]
person.errors.add(:name, 'must be implemented')
# =&gt; [&quot;is invalid&quot;, &quot;must be implemented&quot;]

person.errors.messages
# =&gt; {:name=&gt;[&quot;must be implemented&quot;, &quot;is invalid&quot;]}</pre>

<p>If <tt>message</tt> is a symbol, it will be translated using the
appropriate scope (see <tt>generate_message</tt>).</p>

<p>If <tt>message</tt> is a proc, it will be called, allowing for things like
<tt>Time.now</tt> to be used within an error.</p>

<p>If the <tt>:strict</tt> option is set to true will raise <a
href="StrictValidationFailed.html">ActiveModel::StrictValidationFailed</a>
instead of adding the error. <tt>:strict</tt> option can also be set to any
other exception.</p>

<pre>person.errors.add(:name, nil, strict: true)
# =&gt; ActiveModel::StrictValidationFailed: name is invalid
person.errors.add(:name, nil, strict: NameIsInvalid)
# =&gt; NameIsInvalid: name is invalid

person.errors.messages # =&gt; {}</pre>
            

            
            <div class="method-source-code" id="add-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 291</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">message</span> = <span class="ruby-identifier">normalize_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">exception</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:strict</span>]
    <span class="ruby-identifier">exception</span> = <span class="ruby-constant">ActiveModel</span><span class="ruby-operator">::</span><span class="ruby-constant">StrictValidationFailed</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">exception</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">exception</span>, <span class="ruby-identifier">full_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">self</span>[<span class="ruby-identifier">attribute</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add-source -->
            
          </div>

          

          
        </div><!-- add-method -->

      
        <div id="add_on_blank-method" class="method-detail ">
          <a name="method-i-add_on_blank"></a>

          
          <div class="method-heading">
            <span class="method-name">add_on_blank</span><span
              class="method-args">(attributes, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Will add an error message to each of the attributes in <tt>attributes</tt>
that is blank (using Object#blank?).</p>

<pre>person.errors.add_on_blank(:name)
person.errors.messages
# =&gt; {:name=&gt;[&quot;can't be blank&quot;]}</pre>
            

            
            <div class="method-source-code" id="add_on_blank-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_on_blank</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">attributes</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:read_attribute_for_validation</span>, <span class="ruby-identifier">attribute</span>)
    <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-value">:blank</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">blank?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_on_blank-source -->
            
          </div>

          

          
        </div><!-- add_on_blank-method -->

      
        <div id="add_on_empty-method" class="method-detail ">
          <a name="method-i-add_on_empty"></a>

          
          <div class="method-heading">
            <span class="method-name">add_on_empty</span><span
              class="method-args">(attributes, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Will add an error message to each of the attributes in <tt>attributes</tt>
that is empty.</p>

<pre>person.errors.add_on_empty(:name)
person.errors.messages
# =&gt; {:name=&gt;[&quot;can't be empty&quot;]}</pre>
            

            
            <div class="method-source-code" id="add_on_empty-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_on_empty</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">attributes</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:read_attribute_for_validation</span>, <span class="ruby-identifier">attribute</span>)
    <span class="ruby-identifier">is_empty</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:empty?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">add</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-value">:empty</span>, <span class="ruby-identifier">options</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">is_empty</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_on_empty-source -->
            
          </div>

          

          
        </div><!-- add_on_empty-method -->

      
        <div id="added-3F-method" class="method-detail ">
          <a name="method-i-added-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">added?</span><span
              class="method-args">(attribute, message = nil, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns <tt>true</tt> if an error on the attribute with the given message
is present, <tt>false</tt> otherwise. <tt>message</tt> is treated the same
as for <tt>add</tt>.</p>

<pre>person.errors.add :name, :blank
person.errors.added? :name, :blank # =&gt; true</pre>
            

            
            <div class="method-source-code" id="added-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 333</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">added?</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">message</span> = <span class="ruby-identifier">normalize_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">self</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- added-3F-source -->
            
          </div>

          

          
        </div><!-- added-3F-method -->

      
        <div id="as_json-method" class="method-detail ">
          <a name="method-i-as_json"></a>

          
          <div class="method-heading">
            <span class="method-name">as_json</span><span
              class="method-args">(options=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a Hash that can be used as the JSON representation for this object.
You can pass the <tt>:full_messages</tt> option. This determines if the
json object should contain full messages or not (false by default).</p>

<pre>person.errors.as_json                      # =&gt; {:name=&gt;[&quot;can not be nil&quot;]}
person.errors.as_json(full_messages: true) # =&gt; {:name=&gt;[&quot;name can not be nil&quot;]}</pre>
            

            
            <div class="method-source-code" id="as_json-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 242</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">as_json</span>(<span class="ruby-identifier">options</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">options</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:full_messages</span>])
<span class="ruby-keyword">end</span></pre>
            </div><!-- as_json-source -->
            
          </div>

          

          
        </div><!-- as_json-method -->

      
        <div id="blank-3F-method" class="method-detail method-alias">
          <a name="method-i-blank-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">blank?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>aliases empty?</p>
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Errors.html#method-i-empty-3F">empty?</a>
          </div>
          
        </div><!-- blank-3F-method -->

      
        <div id="clear-method" class="method-detail ">
          <a name="method-i-clear"></a>

          
          <div class="method-heading">
            <span class="method-name">clear</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Clear the error messages.</p>

<pre>person.errors.full_messages # =&gt; [&quot;name can not be nil&quot;]
person.errors.clear
person.errors.full_messages # =&gt; []</pre>
            

            
            <div class="method-source-code" id="clear-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- clear-source -->
            
          </div>

          

          
        </div><!-- clear-method -->

      
        <div id="count-method" class="method-detail ">
          <a name="method-i-count"></a>

          
          <div class="method-heading">
            <span class="method-name">count</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the number of error messages.</p>

<pre>person.errors.add(:name, &quot;can't be blank&quot;)
person.errors.count # =&gt; 1
person.errors.add(:name, &quot;must be specified&quot;)
person.errors.count # =&gt; 2</pre>
            

            
            <div class="method-source-code" id="count-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 206</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">count</span>
  <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- count-source -->
            
          </div>

          

          
        </div><!-- count-method -->

      
        <div id="delete-method" class="method-detail ">
          <a name="method-i-delete"></a>

          
          <div class="method-heading">
            <span class="method-name">delete</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Delete messages for <tt>key</tt>. Returns the deleted messages.</p>

<pre>person.errors.get(:name)    # =&gt; [&quot;can not be nil&quot;]
person.errors.delete(:name) # =&gt; [&quot;can not be nil&quot;]
person.errors.get(:name)    # =&gt; nil</pre>
            

            
            <div class="method-source-code" id="delete-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- delete-source -->
            
          </div>

          

          
        </div><!-- delete-method -->

      
        <div id="each-method" class="method-detail ">
          <a name="method-i-each"></a>

          
          <div class="method-heading">
            <span class="method-name">each</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Iterates through each error key, value pair in the error messages hash.
Yields the attribute and the error for that attribute. If the attribute has
more than one error message, yields once for each error message.</p>

<pre>person.errors.add(:name, &quot;can't be blank&quot;)
person.errors.each do |attribute, error|
  # Will yield :name and &quot;can't be blank&quot;
end

person.errors.add(:name, &quot;must be specified&quot;)
person.errors.each do |attribute, error|
  # Will yield :name and &quot;can't be blank&quot;
  # then yield :name and &quot;must be specified&quot;
end</pre>
            

            
            <div class="method-source-code" id="each-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 159</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>
  <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">each_key</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">self</span>[<span class="ruby-identifier">attribute</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">error</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- each-source -->
            
          </div>

          

          
        </div><!-- each-method -->

      
        <div id="empty-3F-method" class="method-detail ">
          <a name="method-i-empty-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">empty?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns <tt>true</tt> if no errors are found, <tt>false</tt> otherwise. If
the error message is a string it can be empty.</p>

<pre>person.errors.full_messages # =&gt; [&quot;name can not be nil&quot;]
person.errors.empty?        # =&gt; false</pre>
            

            
            <div class="method-source-code" id="empty-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">v</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">v</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- empty-3F-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Errors.html#method-i-blank-3F">blank?</a>
          </div>
          

          
        </div><!-- empty-3F-method -->

      
        <div id="full_message-method" class="method-detail ">
          <a name="method-i-full_message"></a>

          
          <div class="method-heading">
            <span class="method-name">full_message</span><span
              class="method-args">(attribute, message)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a full message for a given attribute.</p>

<pre>person.errors.full_message(:name, 'is invalid') # =&gt; &quot;Name is invalid&quot;</pre>
            

            
            <div class="method-source-code" id="full_message-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 369</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">full_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">message</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">attribute</span> <span class="ruby-operator">==</span> <span class="ruby-value">:base</span>
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-string">'.'</span>, <span class="ruby-string">'_'</span>).<span class="ruby-identifier">humanize</span>
  <span class="ruby-identifier">attr_name</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-value">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attr_name</span>)
  <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">t</span>(<span class="ruby-value">:&quot;errors.format&quot;</span>, {
    <span class="ruby-value">:default</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;%{attribute} %{message}&quot;</span>,
    <span class="ruby-value">:attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">attr_name</span>,
    <span class="ruby-value">:message</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">message</span>
  })
<span class="ruby-keyword">end</span></pre>
            </div><!-- full_message-source -->
            
          </div>

          

          
        </div><!-- full_message-method -->

      
        <div id="full_messages-method" class="method-detail ">
          <a name="method-i-full_messages"></a>

          
          <div class="method-heading">
            <span class="method-name">full_messages</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns all the full error messages in an array.</p>

<pre>class Person
  validates_presence_of :name, :address, :email
  validates_length_of :name, in: 5..30
end

person = Person.create(address: '123 First St.')
person.errors.full_messages
# =&gt; [&quot;Name is too short (minimum is 5 characters)&quot;, &quot;Name can't be blank&quot;, &quot;Email can't be blank&quot;]</pre>
            

            
            <div class="method-source-code" id="full_messages-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">full_messages</span>
  <span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span><span class="ruby-operator">|</span> <span class="ruby-identifier">full_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- full_messages-source -->
            
          </div>

          

          
        </div><!-- full_messages-method -->

      
        <div id="full_messages_for-method" class="method-detail ">
          <a name="method-i-full_messages_for"></a>

          
          <div class="method-heading">
            <span class="method-name">full_messages_for</span><span
              class="method-args">(attribute)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns all the full error messages for a given attribute in an array.</p>

<pre>class Person
  validates_presence_of :name, :email
  validates_length_of :name, in: 5..30
end

person = Person.create()
person.errors.full_messages_for(:name)
# =&gt; [&quot;Name is too short (minimum is 5 characters)&quot;, &quot;Name can't be blank&quot;]</pre>
            

            
            <div class="method-source-code" id="full_messages_for-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">full_messages_for</span>(<span class="ruby-identifier">attribute</span>)
  (<span class="ruby-identifier">get</span>(<span class="ruby-identifier">attribute</span>) <span class="ruby-operator">||</span> []).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">message</span><span class="ruby-operator">|</span> <span class="ruby-identifier">full_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- full_messages_for-source -->
            
          </div>

          

          
        </div><!-- full_messages_for-method -->

      
        <div id="generate_message-method" class="method-detail ">
          <a name="method-i-generate_message"></a>

          
          <div class="method-heading">
            <span class="method-name">generate_message</span><span
              class="method-args">(attribute, type = :invalid, options = {})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Translates an error message in its default scope
(<tt>activemodel.errors.messages</tt>).</p>

<p>Error messages are first looked up in
<tt>models.MODEL.attributes.ATTRIBUTE.MESSAGE</tt>, if it’s not there, it’s
looked up in <tt>models.MODEL.MESSAGE</tt> and if that is not there also,
it returns the translation of the default message (e.g.
<tt>activemodel.errors.messages.MESSAGE</tt>). The translated model name,
translated attribute name and the value are available for interpolation.</p>

<p>When using inheritance in your models, it will check all the inherited
models too, but only if the model itself hasn’t been found. Say you have
<tt>class Admin &lt; User; end</tt> and you wanted the translation for the
<tt>:blank</tt> error message for the <tt>title</tt> attribute, it looks
for these translations:</p>
<ul><li>
<p><tt>activemodel.errors.models.admin.attributes.title.blank</tt></p>
</li><li>
<p><tt>activemodel.errors.models.admin.blank</tt></p>
</li><li>
<p><tt>activemodel.errors.models.user.attributes.title.blank</tt></p>
</li><li>
<p><tt>activemodel.errors.models.user.blank</tt></p>
</li><li>
<p>any default you provided through the <tt>options</tt> hash (in the
<tt>activemodel.errors</tt> scope)</p>
</li><li>
<p><tt>activemodel.errors.messages.blank</tt></p>
</li><li>
<p><tt>errors.attributes.title.blank</tt></p>
</li><li>
<p><tt>errors.messages.blank</tt></p>
</li></ul>
            

            
            <div class="method-source-code" id="generate_message-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 404</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">type</span> = <span class="ruby-value">:invalid</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">type</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:message</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:message</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Symbol</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:i18n_scope</span>)
    <span class="ruby-identifier">defaults</span> = <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lookup_ancestors</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
      [ <span class="ruby-value">:&quot;#{@base.class.i18n_scope}.errors.models.#{klass.model_name.i18n_key}.attributes.#{attribute}.#{type}&quot;</span>,
        <span class="ruby-value">:&quot;#{@base.class.i18n_scope}.errors.models.#{klass.model_name.i18n_key}.#{type}&quot;</span> ]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">defaults</span> = []
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:message</span>)
  <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:&quot;#{@base.class.i18n_scope}.errors.messages.#{type}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:i18n_scope</span>)
  <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:&quot;errors.attributes.#{attribute}.#{type}&quot;</span>
  <span class="ruby-identifier">defaults</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">:&quot;errors.messages.#{type}&quot;</span>

  <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">compact!</span>
  <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">flatten!</span>

  <span class="ruby-identifier">key</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">shift</span>
  <span class="ruby-identifier">value</span> = (<span class="ruby-identifier">attribute</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:base</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:read_attribute_for_validation</span>, <span class="ruby-identifier">attribute</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)

  <span class="ruby-identifier">options</span> = {
    <span class="ruby-value">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">defaults</span>,
    <span class="ruby-value">:model</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">model_name</span>.<span class="ruby-identifier">human</span>,
    <span class="ruby-value">:attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">human_attribute_name</span>(<span class="ruby-identifier">attribute</span>),
    <span class="ruby-value">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>
  }.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">options</span>)

  <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">translate</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- generate_message-source -->
            
          </div>

          

          
        </div><!-- generate_message-method -->

      
        <div id="get-method" class="method-detail ">
          <a name="method-i-get"></a>

          
          <div class="method-heading">
            <span class="method-name">get</span><span
              class="method-args">(key)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Get messages for <tt>key</tt>.</p>

<pre>person.errors.messages   # =&gt; {:name=&gt;[&quot;can not be nil&quot;]}
person.errors.get(:name) # =&gt; [&quot;can not be nil&quot;]
person.errors.get(:age)  # =&gt; nil</pre>
            

            
            <div class="method-source-code" id="get-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">messages</span>[<span class="ruby-identifier">key</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- get-source -->
            
          </div>

          

          
        </div><!-- get-method -->

      
        <div id="has_key-3F-method" class="method-detail method-alias">
          <a name="method-i-has_key-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">has_key?</span><span
              class="method-args">(attribute)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>aliases include?</p>
            

            
          </div>

          

          
          <div class="aliases">
            Alias for: <a href="Errors.html#method-i-include-3F">include?</a>
          </div>
          
        </div><!-- has_key-3F-method -->

      
        <div id="include-3F-method" class="method-detail ">
          <a name="method-i-include-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">include?</span><span
              class="method-args">(attribute)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns <tt>true</tt> if the error messages include an error for the given
key <tt>attribute</tt>, <tt>false</tt> otherwise.</p>

<pre>person.errors.messages        # =&gt; {:name=&gt;[&quot;can not be nil&quot;]}
person.errors.include?(:name) # =&gt; true
person.errors.include?(:age)  # =&gt; false</pre>
            

            
            <div class="method-source-code" id="include-3F-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 95</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">attribute</span>)
  (<span class="ruby-identifier">v</span> = <span class="ruby-identifier">messages</span>[<span class="ruby-identifier">attribute</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">any?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- include-3F-source -->
            
          </div>

          
          <div class="aliases">
            Also aliased as: <a href="Errors.html#method-i-has_key-3F">has_key?</a>
          </div>
          

          
        </div><!-- include-3F-method -->

      
        <div id="keys-method" class="method-detail ">
          <a name="method-i-keys"></a>

          
          <div class="method-heading">
            <span class="method-name">keys</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns all message keys.</p>

<pre>person.errors.messages # =&gt; {:name=&gt;[&quot;can not be nil&quot;, &quot;must be specified&quot;]}
person.errors.keys     # =&gt; [:name]</pre>
            

            
            <div class="method-source-code" id="keys-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 187</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">keys</span>
  <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">keys</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- keys-source -->
            
          </div>

          

          
        </div><!-- keys-method -->

      
        <div id="set-method" class="method-detail ">
          <a name="method-i-set"></a>

          
          <div class="method-heading">
            <span class="method-name">set</span><span
              class="method-args">(key, value)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Set messages for <tt>key</tt> to <tt>value</tt>.</p>

<pre>person.errors.get(:name) # =&gt; [&quot;can not be nil&quot;]
person.errors.set(:name, [&quot;can't be nil&quot;])
person.errors.get(:name) # =&gt; [&quot;can't be nil&quot;]</pre>
            

            
            <div class="method-source-code" id="set-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 115</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">messages</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- set-source -->
            
          </div>

          

          
        </div><!-- set-method -->

      
        <div id="size-method" class="method-detail ">
          <a name="method-i-size"></a>

          
          <div class="method-heading">
            <span class="method-name">size</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the number of error messages.</p>

<pre>person.errors.add(:name, &quot;can't be blank&quot;)
person.errors.size # =&gt; 1
person.errors.add(:name, &quot;must be specified&quot;)
person.errors.size # =&gt; 2</pre>
            

            
            <div class="method-source-code" id="size-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 171</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>
  <span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- size-source -->
            
          </div>

          

          
        </div><!-- size-method -->

      
        <div id="to_a-method" class="method-detail ">
          <a name="method-i-to_a"></a>

          
          <div class="method-heading">
            <span class="method-name">to_a</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns an array of error messages, with the attribute name included.</p>

<pre>person.errors.add(:name, &quot;can't be blank&quot;)
person.errors.add(:name, &quot;must be specified&quot;)
person.errors.to_a # =&gt; [&quot;name can't be blank&quot;, &quot;name must be specified&quot;]</pre>
            

            
            <div class="method-source-code" id="to_a-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 196</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_a</span>
  <span class="ruby-identifier">full_messages</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_a-source -->
            
          </div>

          

          
        </div><!-- to_a-method -->

      
        <div id="to_hash-method" class="method-detail ">
          <a name="method-i-to_hash"></a>

          
          <div class="method-heading">
            <span class="method-name">to_hash</span><span
              class="method-args">(full_messages = false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a Hash of attributes with their error messages. If
<tt>full_messages</tt> is <tt>true</tt>, it will contain full messages (see
<tt>full_message</tt>).</p>

<pre>person.errors.to_hash       # =&gt; {:name=&gt;[&quot;can not be nil&quot;]}
person.errors.to_hash(true) # =&gt; {:name=&gt;[&quot;name can not be nil&quot;]}</pre>
            

            
            <div class="method-source-code" id="to_hash-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 251</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_hash</span>(<span class="ruby-identifier">full_messages</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">full_messages</span>
    <span class="ruby-identifier">messages</span> = {}
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">messages</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">array</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">messages</span>[<span class="ruby-identifier">attribute</span>] = <span class="ruby-identifier">array</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">message</span><span class="ruby-operator">|</span> <span class="ruby-identifier">full_message</span>(<span class="ruby-identifier">attribute</span>, <span class="ruby-identifier">message</span>) }
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">messages</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">messages</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_hash-source -->
            
          </div>

          

          
        </div><!-- to_hash-method -->

      
        <div id="to_xml-method" class="method-detail ">
          <a name="method-i-to_xml"></a>

          
          <div class="method-heading">
            <span class="method-name">to_xml</span><span
              class="method-args">(options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns an xml formatted representation of the <a
href="Errors.html">Errors</a> hash.</p>

<pre>person.errors.add(:name, &quot;can't be blank&quot;)
person.errors.add(:name, &quot;must be specified&quot;)
person.errors.to_xml
# =&gt;
#  &lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;
#  &lt;errors&gt;
#    &lt;error&gt;name can't be blank&lt;/error&gt;
#    &lt;error&gt;name must be specified&lt;/error&gt;
#  &lt;/errors&gt;</pre>
            

            
            <div class="method-source-code" id="to_xml-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 232</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">options</span>={})
  <span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">to_xml</span>({ <span class="ruby-value">:root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;errors&quot;</span>, <span class="ruby-value">:skip_types</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span> }.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">options</span>))
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_xml-source -->
            
          </div>

          

          
        </div><!-- to_xml-method -->

      
        <div id="values-method" class="method-detail ">
          <a name="method-i-values"></a>

          
          <div class="method-heading">
            <span class="method-name">values</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns all message values.</p>

<pre>person.errors.messages # =&gt; {:name=&gt;[&quot;can not be nil&quot;, &quot;must be specified&quot;]}
person.errors.values   # =&gt; [[&quot;can not be nil&quot;, &quot;must be specified&quot;]]</pre>
            

            
            <div class="method-source-code" id="values-source">
<pre>
<span class="ruby-comment"># File lib/active_model/errors.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">values</span>
  <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">values</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- values-source -->
            
          </div>

          

          
        </div><!-- values-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

